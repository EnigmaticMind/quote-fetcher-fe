import{R as N,a as u,p as e,w as D}from"./chunk-PVWAREVJ-BGDX7Rsd.js";const P=N.memo(function({}){return u.useEffect(()=>{console.log("Rendering Action Panel")}),e.jsxs("div",{className:"w-64 bg-card border border-border rounded-lg p-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-card-foreground",children:"Actions"}),e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-card-foreground",children:"Arrow Keys:"})," ","focus cells"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-card-foreground",children:"X Key:"})," ","select cells"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-card-foreground",children:"Shift + Arrow Keys:"})," ","Bulk select cells"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-card-foreground",children:"Space:"})," ","scrape quote using Puppeteer"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-card-foreground",children:"Esc:"})," clear selected cells"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-card-foreground",children:"Ctrl + A:"})," ","select all cells"]}),e.jsx("div",{className:"mt-3 pt-2 border-t border-border",children:e.jsxs("p",{className:"text-xs",children:[e.jsx("span",{className:"font-medium text-card-foreground",children:"Note:"})," Each fetch uses Puppeteer to scrape live quotes from quotes.toscrape.com. The browser launches, navigates, and extracts real data!"]})})]})]})}),q=N.memo(function({index:n,isFocused:t,isSelected:g,isLoading:x,loadingMessage:f,content:i}){u.useEffect(()=>{console.log(`Render Quote Cell ${n}`),console.log(`Content: ${i}`)});const d=p=>{var j;const b=(j=p.text)==null?void 0:j.split(" ");return`"${b.slice(0,Math.min(5,Math.max(3,b.length))).join(" ")}..."`};return e.jsx("div",{className:`w-52 h-16 bg-card border border-border rounded-lg flex items-center justify-center text-card-foreground font-medium transition-colors ${t?"ring-2 ring-primary bg-accent text-accent-foreground":""} ${g?"bg-primary text-primary-foreground":""}`,children:x?e.jsx("span",{className:"text-sm text-muted-foreground animate-pulse",children:f||"Loading..."}):i?e.jsx("span",{className:"italic text-sm px-2 text-center",children:d(i)}):"Empty"})}),L=N.memo(function({cellContent:n}){var t;return u.useEffect(()=>{console.log("Rendering Quote Details"),console.log(n)}),e.jsxs("div",{className:"w-64 bg-white border border-border rounded-lg p-4 flex-shrink-0 self-start",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Details"}),n&&e.jsx("svg",{className:"w-4 h-4 text-muted-foreground hover:text-foreground cursor-pointer transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}),n?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-foreground mb-2",children:"Full Quote:"}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:n==null?void 0:n.text})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-foreground mb-1",children:"Author:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n==null?void 0:n.author})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-foreground mb-1",children:"Tags:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:(t=n==null?void 0:n.tags)==null?void 0:t.map((g,x)=>e.jsx("span",{className:"px-2 py-1 bg-muted text-muted-foreground text-xs rounded-md",children:g},x))})]})]}):e.jsx("p",{className:"text-muted-foreground text-sm",children:n!==null?"Cell is empty":"Press space to activate keyboard navigation"})]})}),$=({message:h,onClose:n})=>(u.useEffect(()=>{const t=setTimeout(n,3e3);return()=>clearTimeout(t)},[n]),e.jsx("div",{className:"fixed top-5 right-5 bg-red-600 text-white px-4 py-2 rounded-lg shadow-lg animate-fade-in",children:h})),y=new Map,F=10,K=10;function Q(){const[h,n]=u.useState(null),[t,g]=u.useState(null),[x,f]=u.useState(new Set),[i,d]=u.useState(null),[p,b]=u.useState({}),[w,j]=u.useState(new Set),[E,S]=u.useState({}),M=async()=>{var a;const c=Math.floor(Math.random()*F)+1,s=Math.floor(Math.random()*K);try{if(y.get(c))console.log(`Returning cached quote ${c} ${s}`);else{const o=`https://glowing-invention-gv9qvjpvgg43w4q6-3000.app.github.dev/?page=${c}`;console.log(`Fetching quote ${s} from page ${c}`),y.set(c,new Promise(async l=>{const r=await fetch(o);r.ok||(console.log(`HTTP error ${r.status}: ${r.statusText}`),n("Problem retrieving quotes make sure the remote server is running"));const m=new Map;(await r.json()).forEach((R,A)=>{m.set(A,R)}),l(m)}))}return(a=await y.get(c))==null?void 0:a.get(s)}catch(o){return console.error("** Fetch Failed:",o==null?void 0:o.message),{error:o==null?void 0:o.message}}},k=async c=>{const s=["Starting fetch...","Logging in...",`Browsing to page ${Math.floor(Math.random()*10)+1}...`,"Selecting random quote...","Selected."];j(a=>new Set([...a,c]));for(let a=0;a<s.length;a++){S(l=>({...l,[c]:s[a]}));const o=0;await new Promise(l=>setTimeout(l,o))}try{const a=await M();b(o=>({...o,[c]:a})),j(o=>{const l=new Set(o);return l.delete(c),l}),S(o=>{const l={...o};return delete l[c],l})}catch(a){console.error("Random quote failure:",a==null?void 0:a.message)}};return u.useEffect(()=>{console.log("-- Rendeirng welcome component");const c=s=>{if(t===null){s.preventDefault(),g(0);return}const a=Math.floor(t/3),o=t%3,l=(r,m)=>{const v=new Set(x);v.add(m),f(v)};switch(s.key){case"ArrowUp":if(s.preventDefault(),a>0){const r=t-3;g(r),s.shiftKey?(i===null&&(d(t),f(new Set([t]))),l(i,r)):d(null)}break;case"ArrowDown":if(s.preventDefault(),a<99){const r=t+3;g(r),s.shiftKey?(i===null&&(d(t),f(new Set([t]))),l(i,r)):d(null)}break;case"ArrowLeft":if(s.preventDefault(),o>0){const r=t-1;g(r),s.shiftKey?(i===null&&(d(t),f(new Set([t]))),l(i,r)):d(null)}break;case"ArrowRight":if(s.preventDefault(),o<2){const r=t+1;g(r),s.shiftKey?(i===null&&(d(t),f(new Set([t]))),l(i,r)):d(null)}break;case"x":case"X":s.preventDefault(),f(r=>{const m=new Set(r);return m.has(t)?m.delete(t):m.add(t),m}),d(null);break;case" ":s.preventDefault(),x.size>0?x.forEach(r=>{(p[r]||"Empty")==="Empty"&&!w.has(r)&&k(r)}):t!==null&&(p[t]||"Empty")==="Empty"&&!w.has(t)&&k(t);break;case"Escape":s.preventDefault(),f(new Set),d(null);break;case"a":case"A":if(s.ctrlKey||s.metaKey){s.preventDefault();const r=new Set(Array.from({length:300},(m,v)=>v));f(r),d(null)}break}};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[t,i,x,p,w]),e.jsxs("main",{className:"min-h-screen p-8 bg-background",children:[e.jsxs("div",{className:"mx-auto w-fit",children:[e.jsx("h1",{className:"text-3xl font-bold text-center mb-8 text-foreground",children:"Live Quote Scraper"}),e.jsxs("div",{className:"flex gap-8 items-start",children:[e.jsx(P,{}),e.jsx("div",{className:"grid grid-cols-3 gap-2 flex-shrink-0",children:Array.from({length:300},(c,s)=>e.jsx(q,{index:s,isFocused:t===s,isSelected:x.has(s),isLoading:w.has(s),loadingMessage:E[s],content:p[s]},s))}),t,e.jsx(L,{cellContent:t===null?null:p[t]})]})]}),h&&e.jsx($,{message:h,onClose:()=>n(null)})]})}function C({}){return[{title:"New React Router App"},{name:"description",content:"Welcome to React Router!"}]}const W=D(function(){return u.useEffect(()=>{console.log("-- Rendeirng home component")}),e.jsx(Q,{})});export{W as default,C as meta};
